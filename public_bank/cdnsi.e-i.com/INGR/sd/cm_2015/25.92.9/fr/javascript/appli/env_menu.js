!function(o){function n(e,i){var t;e?(o("html").addClass("noscroll"),o("body").on("touchstart",function(e){t=e.originalEvent.touches[0].clientY}),o("body").on("touchmove",function(e){if(0<o(e.target).parents(i).length){var n=!1;if((o(i).scrollTop()+o(i).innerHeight()<o(i).prop("scrollHeight")||0<o(i).scrollTop()&&t<e.originalEvent.touches[0].clientY)&&(n=!0),t=e.originalEvent.touches[0].clientY,n)return}e.preventDefault(),e.stopPropagation()})):(o("html").removeClass("noscroll"),o("#ei_tpl_fullsite").removeClass("pfixed"),o("body").off("touchmove"),o("body").off("touchstart"))}o.fn.ei_menuMobil=function(e){var i=null,t=0,l=0,s=0;return this.cloneMenuMobile=function(){o("#ei_tpl_mMobPrincipal").html(o("#ei_tpl_menuPrincipal").html()),o("#ei_tpl_mMobPrincipal").find("#ei_quicklink_menu").attr("id","ei_quicklink_menumob")},this.resetMenuMobil=function(){_resetMenuMobil()},_resetMenuMobil=function(){o("#ei_tpl_fullsite").unbind("click"),o(i).hide(300,function(){o("html").removeClass("ei_tpl_menuMobil_open")}),n(!1,i),_menuMobil_deleateSmenu()},this.menuMobil_init=function(e){s=o("#ei_tpl_head").height(),t=o(window).height()-s,o("#ei_tpl_mMobPrincipal .e_smenu").css("margin-left","0!important");var n=o(i).find("nav ul li.e_menudepliant a:not(li.e_menudepliant li a)");o(n).hasClass("mob_link")||o(n).addClass("mob_link").click(function(e){var n=null!=o(this).parent().attr("id")?"id='"+o(this).parent().attr("id")+"'":"";return o("#ei_tpl_mMobPrincipal").width(l).after("<div id='ei_tpl_mMobSec' width='"+l+"px'><div class='"+o(this).parent().attr("class")+"' "+n+">"+o(this).parent().html()+"</div></div>"),o("#ei_tpl_mMobContent").width(2*l),o("#ei_tpl_mMobSec a:not(ul li a)").click(function(e){return _menuMobil_homeback(),!1}),o("#ei_tpl_mMobSec .e_menu_srub").each(function(){var e,n,i;e=o(this),n=0,i=o(e).parent(),o(i).hasClass("e_menu_srub_open")?(o(i).removeClass("e_menu_srub_open"),o(i).find(".e_smenu").slideUp(n)):(o(i).addClass("e_menu_srub_open"),o(i).find(".e_smenu").slideDown(n))}),o("#ei_tpl_menuMobil").animate({scrollTop:0},300,"swing",function(){o("#ei_tpl_mMobContent").animate({left:"-="+l},300)}),!1})},_menuMobil_homeback=function(){o("#ei_tpl_mMobContent").animate({left:"0"},500,function(){_menuMobil_deleateSmenu()})},_menuMobil_deleateSmenu=function(){o("#ei_tpl_mMobContent").stop(!0,!0).width("").css("left",""),o("#ei_tpl_mMobPrincipal").width(""),o("#ei_tpl_mMobSec").remove()},this.menuMobil_bt=function(){o("#ei_tpl_menuLink a").click(function(e){return o("html").hasClass("ei_tpl_menuMobil_open")?_resetMenuMobil():(o(i).css("height",t).css("top",s),o(i).show(300,function(){o("html").addClass("ei_tpl_menuMobil_open"),l=o("#ei_tpl_mMobPrincipal").width()}),o("#ei_tpl_fullsite").click(function(e){_resetMenuMobil()}),n(!0,i)),!1})},this.each(function(){i=this})},o.fn.ei_menuDefault=function(e){var i=null;return this.menuDefault_init=function(e){var n=o("#ei_tpl_menuPrincipal > nav > ul  li a");null==o(n).find("> span").html()&&o(n).wrapInner("<span></span>"),o(i).find(".e_menudepliant").hover(function(){return o(this).find(".e_smenu").addClass("smenu_open"),o("li.e_menuinline > a").css("z-index","1011"),o(i).hasClass("ei_menu_focus")&&(o(i).find("li").removeClass("e_focus"),o(i).removeClass("ei_menu_focus"),o(i).find("h2").eq(0).focus()),!1},function(){o(this).find(".e_smenu").removeClass("smenu_open"),o("li.e_menuinline > a").css("z-index","")}),o("body:not(.ei_tpl_conseil) #ei_tpl_menuPrincipal .e_menudepliant > .e_smenu").each(function(){var e="";o(this).parent().hasClass("e_smenucenter")&&(e=0<o(this).find(".e_menuCol1").length?".e_menuCol1 ":"");var n=o(this).find(e+"li:first").position(),i=o(this).find(e+"li:last").position(),t=Math.round(i.left-n.left);0<t&&o(this).width(t+270);var l=Math.round(-1*(o(this).width()/2-o(this).parent().width()/2+10));o(this).css("margin-left",l+"px");try{var s=Math.round(o("#ei_tpl_menuPrincipal #ei_m_accueil").offset().left-o(this).offset().left);0<s&&o(this).css("margin-left",Math.round(l+s)+"px")}catch(e){}}),o(".ei_tpl_conseil #ei_tpl_menuPrincipal .e_menudepliant > .e_smenu").each(function(){if(o(window).width()/2-Math.round(o(this).width()/2)<=o(this).parent().offset().left&&o(this).css("left","calc(50% - "+Math.round(o(this).width()/2)+"px)"),o(this).offset().left+o(this).width()<=o(this).parent().offset().left+o(this).parent().width()){var e=o(this).parent().offset().left+o(this).parent().width()-(o(this).offset().left+o(this).width());o(this).css("left","calc(50% - "+(Math.round(o(this).width()/2)-e)+"px)")}}),function(){o("#ei_tpl_menuPrincipal > nav > h2").hasClass("invisible")||o("#ei_tpl_menuPrincipal > nav").prepend("<h2 class='invisible' tabindex='-1'>Menu</h2>");o("#ei_tpl_menuPrincipal > nav li.e_menudepliant > a[href='#'], #ei_tpl_menuPrincipal > nav div.e_smenu li.e_menu_srub > a[href='#']").attr("role","presentation"),o("#ei_tpl_menuPrincipal > nav ul[role*='menu']").removeAttr("role"),o("#ei_tpl_menuPrincipal > nav a[role='menuitem']").removeAttr("role"),o("#ei_tpl_menuPrincipal > nav div.e_smenu[aria-hidden='true']").removeAttr("aria-hidden"),o("#ei_tpl_menuPrincipal > nav div[role='presentation']").removeAttr("role")}(),o(i).find("ul li a").attr("tabindex","-1"),o("#ei_tpl_menuPrincipal > nav a").first().attr("tabindex","0"),o(i).on("focus","li",function(){o(this).addClass("e_focus"),o(i).addClass("ei_menu_focus")}),o(i).on("blur","li",function(){o(this).removeClass("e_focus"),o(i).removeClass("ei_menu_focus")}),o(i).find("li").keydown(function(e){var n=o(".e_focus:last"),i=n.find(".e_smenu").first(),t=n.nextAll(":not(.e_menu_hidden, .e_menu_hidden *)").first(),l=n.prevAll(":not(.e_menu_hidden, .e_menu_hidden *)").first();switch(e.which){case 9:break;case 39:e.preventDefault(),e.stopPropagation(),0<n.parents(".e_menudepliant").length&&(t=(n=n.parents(".e_menudepliant")).nextAll(":not(.e_menu_hidden, .e_menu_hidden *)").first()),n.hasClass("e_menuinline")&&(t=n.find(" > .e_smenu > ul > li:not(.e_menu_hidden, .e_menu_hidden *)").first()),0==t.length&&(t=(n=o(".e_focus:first")).next()),t.find("a:visible").first().focus();break;case 37:e.preventDefault(),e.stopPropagation(),0<n.parents(".e_menudepliant").length&&(l=(n=n.parents(".e_menudepliant")).prevAll(":not(.e_menu_hidden, .e_menu_hidden *)").first()),l.hasClass("e_menuinline")&&(l=l.find(" > .e_smenu > ul > li:not(.e_menu_hidden, .e_menu_hidden *)").last()),0==l.length&&0<n.parents(".e_menuinline").length&&(l=n.parents(".e_menuinline").first()),l.hasClass("e_menuinline")&&l.prev()&&(l=l.prev()),l.find("a:visible").first().focus();break;case 40:if(e.preventDefault(),e.stopPropagation(),0<i.length&&0<i.find("a:visible").length)t=i.find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible').first();else{var s=(a=n.parents(".e_menudepliant").find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible')).index(n.find("a:visible").first());t=null==(t=a[s+1])?a[0]:t}null!=t&&t.focus();break;case 38:if(e.preventDefault(),e.stopPropagation(),0<i.length&&0<i.find("a:visible").length)t=i.find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible').first();else{var a;s=(a=n.parents(".e_menudepliant").find('li:not(.e_menu_hidden, .e_menu_hidden *) a[href!="#"]:visible')).index(n.find("a:visible").first());t=null==(t=a[s-1])?a[a.length-1]:t}null!=t&&t.focus()}})},this.each(function(){i=this})}}(jQuery);