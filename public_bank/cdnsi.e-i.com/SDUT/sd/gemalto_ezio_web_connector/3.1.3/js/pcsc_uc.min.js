/*! cdn_sd_gemalto_ezio_web_connector 2018-01-16 */
function SCardScope(){}function SCardAccessMode(){}function SCardProtocolIdentifiers(){}function SCardDisposition(){}function SCardState(){}SConnect.PCSCInfo=function(){this.packageVersion="1.1.0.0",this.packageURL={win:"pcsc/pcsc-win-v"+this.packageVersion+".pkg",win64:"pcsc/pcsc-win64-v"+this.packageVersion+".pkg",lx:"pcsc/pcsc-lx-v"+this.packageVersion+".pkg",lx64:"pcsc/pcsc-lx64-v"+this.packageVersion+".pkg",osx:"pcsc/pcsc-osx-v"+this.packageVersion+".pkg"},this.packageUUID="f7384f20-cd95-11e2-8b8b-0800200c9a66",this.packageName="PCSC AddOn"},SCardScope.User=0,SCardScope.Terminal=1,SCardScope.System=2,SCardAccessMode.Exclusive=1,SCardAccessMode.Shared=2,SCardAccessMode.Direct=3,SCardProtocolIdentifiers.Default=-2147483648,SCardProtocolIdentifiers.Optimal=0,SCardProtocolIdentifiers.Raw=65536,SCardProtocolIdentifiers.T0=1,SCardProtocolIdentifiers.T1=2,SCardProtocolIdentifiers.Undefined=0,SCardDisposition.LeaveCard=0,SCardDisposition.ResetCard=1,SCardDisposition.UnpowerCard=2,SCardDisposition.EjectCard=3,SCardDisposition.Confiscate=4,SCardState.Unaware=0,SCardState.Ignore=1,SCardState.Changed=2,SCardState.Unknown=4,SCardState.Unavailable=8,SCardState.Empty=16,SCardState.Present=32,SCardState.ATRMatch=64,SCardState.Exclusive=128,SCardState.Inuse=256,SCardState.Mute=512,SCardState.Unpowered=1024,SConnect.PCSC=function(){this._addonInfo=null,this._addonId=null,this._eContext=!1,this._isDisposed=!0,this._transactionCounter=0,this._connectedReader=null,this._activeProtocol=0,this._exchangeInProgress=!1},SConnect.PCSC.prototype={_triggerCallback:function(a,b,c,d,e){SConnect._triggerCallback(a,b,c,d,e)},_invoke:function(a,b,c){"undefined"==typeof b&&(b=null),"undefined"==typeof c&&(c=null);var d=this,e={success:function(a){var b=a[0],e=0==b;e?d._triggerCallback(c,!0,a[1],a[2],a[3]):d._triggerCallback(c,!1,b)},error:function(a){d._triggerCallback(c,!1,a)}};SConnect._invokeAddOnInstance(this._addonId,a,JSON.stringify(b),e)},_create:function(a){SConnect._createAddOnInstance(this._addonInfo.packageUUID,this._addonInfo.packageVersion,this._addonInfo.versionType,a)},_dispose:function(a){SConnect._disposeAddOnInstance(this._addonId,this._addonInfo.packageUUID,this._addonInfo.packageVersion,a)},_registerCardStatusChangeListener:function(a,b){SConnect._registerAddOnEvent(this._addonId,"CardStatusChangeEvent",a,b)},_unregisterCardStatusChangeListener:function(a){SConnect._unregisterAddOnEvent(this._addonId,"CardStatusChangeEvent",a)},_getActivePCI:function(){var a;return a=this._activeProtocol==SCardProtocolIdentifiers.T0?0:this._activeProtocol==SCardProtocolIdentifiers.T1?1:this._activeProtocol==SCardProtocolIdentifiers.Raw?2:0},getConnectedReader:function(){return this._connectedReader},getActiveProtocol:function(){return this._activeProtocol},establishContext:function(a,b){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(this._eContext)throw new SConnect.Exception("InvalidOperation");"undefined"==typeof b&&(b=SCardScope.User);var c=[];c.push(b);var d=this,e={success:function(){d._eContext=!0,d._triggerCallback(a,!0)},error:function(b){d._triggerCallback(a,!1,b)}};this._invoke("SCardEstablishContext",c,e)},releaseContext:function(a){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(!this._eContext)throw new SConnect.Exception("InvalidOperation");var b=this,c={success:function(){b._eContext=!1,b._triggerCallback(a,!0)},error:function(c){b._triggerCallback(a,!1,c)}};this._invoke("SCardReleaseContext",null,c)},beginTransaction:function(a){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(0==this._transactionCounter){var b=this,c={success:function(){b._transactionCounter++,b._triggerCallback(a,!0,b._transactionCounter)},error:function(c){b._triggerCallback(a,!1,c)}};this._invoke("SCardBeginTransaction",null,c)}else this._transactionCounter++,this._triggerCallback(a,!0,this._transactionCounter)},endTransaction:function(a,b){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader||0===this._transactionCounter)throw new SConnect.Exception("InvalidOperation");if("undefined"==typeof b&&(b=SCardDisposition.LeaveCard),this._transactionCounter>1)this._transactionCounter--,this._triggerCallback(a,!0,this._transactionCounter);else if(1===this._transactionCounter){var c=[];c.push(b);var d=this,e={success:function(){d._transactionCounter=0,d._triggerCallback(a,!0,d._transactionCounter)},error:function(b){d._triggerCallback(a,!1,b)}};this._invoke("SCardEndTransaction",c,e)}},cardCancel:function(a){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");this._invoke("SCardCancel",null,a)},connect:function(a,b,c,d){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null!==this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(arguments.length<1)throw new SConnect.Exception("InsufficientArguments");"undefined"==typeof c&&(c=SCardAccessMode.Shared),"undefined"==typeof d&&(d=SCardProtocolIdentifiers.T0|SCardProtocolIdentifiers.T1);var e=[];e.push(a),e.push(c),e.push(d);var f=this,g={success:function(c){f._connectedReader=a,f._activeProtocol=c,f._triggerCallback(b,!0,a)},error:function(a){f._triggerCallback(b,!1,a)}};this._invoke("SCardConnect",e,g)},reconnect:function(a,b,c,d){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(d==SCardDisposition.EjectCard)throw new SConnect.Exception("InvalidDispositionMode");"undefined"==typeof b&&(b=SCardAccessMode.Shared),"undefined"==typeof c&&(c=SCardProtocolIdentifiers.T0|SCardProtocolIdentifiers.T1),"undefined"==typeof d&&(d=SCardDisposition.LeaveCard);var e=[];e.push(b),e.push(c),e.push(d);var f=this,g={success:function(b){f._activeProtocol=b,f._triggerCallback(a,!0,f._connectedReader)},error:function(b){f._triggerCallback(a,!1,b)}};this._invoke("SCardReconnect",e,g)},disconnect:function(a,b){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");"undefined"==typeof b&&(b=SCardDisposition.LeaveCard);var c=[];c.push(b);var d=this,e={success:function(){var b=d._connectedReader;d._activeProtocol=0,d._connectedReader=null,d._transactionCounter=0,d._triggerCallback(a,!0,b)},error:function(b){d._triggerCallback(a,!1,b)}};this._invoke("SCardDisconnect",c,e)},readerStatus:function(a,b,c){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(!this._eContext)throw new SConnect.Exception("InvalidOperation");if(arguments.length<1)throw new SConnect.Exception("InsufficientArguments");"undefined"==typeof c&&(c=SCardState.Unaware);var d=[];d.push(0),d.push(a),d.push(c),this._invoke("SCardGetStatusChange",d,b)},cardStatus:function(a){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null==this._connectedReader)throw new SConnect.Exception("InvalidOperation");this._invoke("SCardStatus",null,a)},listReaders:function(a,b){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(!this._eContext)throw new SConnect.Exception("InvalidOperation");var c=[];c.push(a?1:0);var d=this,e={success:function(a){var c=a.split("#");c=c.splice(0,c.length-1),d._triggerCallback(b,!0,c)},error:function(a){d._triggerCallback(b,!1,a)}};this._invoke("SCardListReaders",c,e)},transmit:function(a,b,c,d,e){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(arguments.length<1)throw new SConnect.Exception("InsufficientArguments");var f=[];f.push(this._getActivePCI()),f.push(a),f.push(c>0?c:258),f.push(d>=0?d:-1),f.push(e>=0?e:-1);var g=this,h={success:function(a){var c=a,d="";c.length>4&&(d=c.substr(0,c.length-4));var e=d,f=c.substr(c.length-4,4);g._triggerCallback(b,!0,f,e)},error:function(a){g._triggerCallback(b,!1,a)}};this._invoke("SCardTransmit",f,h)},exchangeAPDU:function(a,b,c,d,e){if(arguments.length<1)throw new SConnect.Exception("InsufficientArguments");if(this._exchangeInProgress)throw new SConnect.Exception("ExchangeInProgress");var f=this,g="",h="",i=null,j={success:function(){i?f._triggerCallback(b,!1,i):f._triggerCallback(b,!0,g,h)},error:function(a){i?f._triggerCallback(b,!1,i):f._triggerCallback(b,!1,a)}},k={success:function(b,c){var i=b.substr(0,2),l=b.substr(2,2);g=b,h+=c,"6C"!=i||d>=0||e>=0?"9F"==i||"61"==i?(a=a.substr(0,2)+"C00000"+l,f.transmit(a,k)):(f._exchangeInProgress=!1,f.endTransaction(j)):(a=a.substring(0,8)+l,f.transmit(a,k))},error:function(a){i=a,f._exchangeInProgress=!1,f.endTransaction(j)}},l={success:function(){this._activeProtocol==SCardProtocolIdentifiers.T1&&"undefined"!=typeof c&&null!=c&&(a+=c),f.transmit(a,k,null,d,e)},error:function(a){f._exchangeInProgress=!1,f._triggerCallback(b,!1,a)}};this._exchangeInProgress=!0,this.beginTransaction(l)},cardControl:function(a,b,c,d,e){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(arguments.length<3)throw new SConnect.Exception("InsufficientArguments");var f=[];f.push(a),f.push(c?1:0),f.push(b?b:""),f.push(e>0?e:258),this._invoke("SCardControl",f,d)},getAttrib:function(a,b,c){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null===this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(arguments.length<1)throw new SConnect.Exception("InsufficientArguments");var d=[];d.push(a),d.push(c>0?c:258),this._invoke("SCardGetAttrib",d,b)},setAttrib:function(a,b,c){if(this._isDisposed)throw new SConnect.Exception("ObjectDisposed");if(null==this._connectedReader)throw new SConnect.Exception("InvalidOperation");if(arguments.length<2)throw new SConnect.Exception("InsufficientArguments");var d=[];d.push(a),d.push(b),this._invoke("SCardSetAttrib",d,c)},dispose:function(){this._isDisposed||(this._dispose(null),this._addonId=null,this._isDisposed=!0)}},SConnect.PCSC.Create=function(a){var b=!0,c=new SConnect.PCSCInfo,d=new SConnect.PCSC;d._addonInfo=c;var e={success:function(c){var e=c[0],f=e>=0;if(f)if(d._addonId=c[0],d._isDisposed=!1,b){var g={success:function(){d._triggerCallback(a,!0,d)},error:function(b){d._triggerCallback(a,!1,b)}};d.establishContext(g)}else d._triggerCallback(a,!0,d);else d._triggerCallback(a,!1,e)},error:function(b){d._triggerCallback(a,!1,b)}};d._create(e)},SConnect.PCSC.RegisterCardIRHandler=function(a){if(window.internal_ir_scom)SConnect._triggerCallback(a,!0);else{var b={success:function(b){window.internal_ir_scom=b,window.internal_ir_callback=a,b._registerCardStatusChangeListener(SConnect.PCSC._onCardStatusChange,a)},error:function(b){SConnect._triggerCallback(a,!1,b)}};SConnect.PCSC.Create(b)}},SConnect.PCSC.UnregisterCardIRHandler=function(a){window.internal_ir_scom?(window.internal_ir_scom._unregisterCardStatusChangeListener(a),window.internal_ir_scom.dispose(),window.internal_ir_scom=null,window.internal_ir_callback=null):SConnect._triggerCallback(a,!0)},SConnect.PCSC._onCardStatusChange=function(a){var b=JSON.parse(a),c=b[0],d=b[1],e=b[2],f={};f.readerName=c,"removed"===d||0===d?window.internal_ir_callback&&window.internal_ir_callback.onCardRemoval&&(window.internal_ir_callback.scope?window.internal_ir_callback.onCardRemoval.apply(window.internal_ir_callback.scope,[f]):window.internal_ir_callback.onCardRemoval(f)):"inserted"===d||1===d?e&&e.length>0?(f.ATR=e,window.internal_ir_callback&&window.internal_ir_callback.onCardInsertion&&(window.internal_ir_callback.scope?window.internal_ir_callback.onCardInsertion.apply(window.internal_ir_callback.scope,[f]):window.internal_ir_callback.onCardInsertion(f))):window.internal_ir_callback&&window.internal_ir_callback.onCardInsertionMute&&(window.internal_ir_callback.scope?window.internal_ir_callback.onCardInsertionMute.apply(window.internal_ir_callback.scope,[f]):window.internal_ir_callback.onCardInsertionMute(f)):"disconnected"===d||2===d?window.internal_ir_callback&&window.internal_ir_callback.onReaderDisconnected&&(window.internal_ir_callback.scope?window.internal_ir_callback.onReaderDisconnected.apply(window.internal_ir_callback.scope,[f]):window.internal_ir_callback.onReaderDisconnected(f)):("connected"===d||3===d)&&window.internal_ir_callback&&window.internal_ir_callback.onReaderConnected&&(window.internal_ir_callback.scope?window.internal_ir_callback.onReaderConnected.apply(window.internal_ir_callback.scope,[f]):window.internal_ir_callback.onReaderConnected(f))};